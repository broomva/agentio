# Canonical Commands — Stable command surface for all automation
# Command names MUST NOT change. Internals may be refactored via wrappers.

version: "1.0"

commands:
  # Core harness commands
  smoke:
    description: "Fast sanity check — build + quick lint"
    script: "scripts/harness/smoke.sh"
    timeout_ms: 60000
    ci_required: true

  lint:
    description: "Run linters across all packages"
    script: "scripts/harness/lint.sh"
    timeout_ms: 120000
    ci_required: true

  typecheck:
    description: "TypeScript type checking across all packages"
    script: "scripts/harness/typecheck.sh"
    timeout_ms: 120000
    ci_required: true

  test:
    description: "Run all unit and integration tests"
    script: "scripts/harness/test.sh"
    timeout_ms: 300000
    ci_required: true

  check:
    description: "Combined lint + typecheck"
    depends_on: [lint, typecheck]
    ci_required: true

  ci:
    description: "Full CI pipeline — smoke + test + check"
    depends_on: [smoke, test, check]
    ci_required: true

  # Control commands
  recover:
    description: "Attempt automated recovery from common failures"
    script: "scripts/control/recover.sh"
    timeout_ms: 120000
    ci_required: false

  web-e2e:
    description: "Web end-to-end tests via Playwright"
    script: "scripts/control/web_e2e.sh"
    timeout_ms: 300000
    ci_required: false

  cli-e2e:
    description: "CLI end-to-end smoke tests"
    script: "scripts/control/cli_e2e.sh"
    timeout_ms: 120000
    ci_required: false

  # Audit commands
  audit:
    description: "Harness engineering audit"
    script: "scripts/audit_harness.sh"
    timeout_ms: 30000
    ci_required: false

  control-audit:
    description: "Control metalayer audit"
    script: "scripts/audit_control.sh"
    timeout_ms: 30000
    ci_required: false
